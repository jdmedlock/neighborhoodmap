(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},35:function(e,t,a){e.exports=a(63)},40:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),s=a.n(r),i=(a(40),a(3)),c=a(4),l=a(12),u=a(11),d=a(13),p=a(66),h=a(65),m=a(5),v=a(17),f=a(22),g=(a(15),function(e){return o.a.createElement("div",null,o.a.createElement(m.Grid,null,o.a.createElement(m.GridCell,{span:"8"},o.a.createElement("section",{id:"map"}))))}),w=a(6),b=a(30),y=a.n(b),k=a(31),E=a(23),R=a(24),T=a.n(R),I=a(32),O=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"getFormattedAddress",value:function(e){var t=e.venue.location,a=t.address,n=t.city,o=t.state,r=t.postal_code;return void 0===a&&void 0===n&&void 0===o&&void 0===r?"":(n=void 0!==n?n:"",o=void 0!==o?o:"",r=void 0!==r?r:"","".concat(a=void 0!==a?a:"",", ").concat(n,", ").concat(o,"  ").concat(r))}},{key:"createFormattedAddressHTML",value:function(e){var t=this.getFormattedAddress(e);if(""===t)return"";var a=t.indexOf(",");return"<div>".concat(t.slice(0,a),"</div>\n      <div>").concat(t.slice(a+1),"</div>")}},{key:"getName",value:function(e){return void 0===e.venue.name?"":e.venue.name}},{key:"getRating",value:function(e){return void 0===e.rating?0:e.rating.toFixed(1)}},{key:"createRatingHTML",value:function(e){var t=this.getRating(e);if(0===t)return"";for(var a=Math.floor(t),n="",o=0;o<a;o+=1)n+="star ";return t>a&&(n+="star_half "),'<span class="iw-chip">\n        <i class="material-icons iw-rating">'.concat(n,"</i>\n      </span>")}},{key:"getHereNow",value:function(e){return void 0===e.venue.hereNow.summary?"":e.venue.hereNow.summary}},{key:"createHereNowHTML",value:function(e){var t=this.getHereNow(e);return""===t?"":'<span class="iw-chip">'.concat(t,"</span>")}},{key:"getFirstCategory",value:function(e){return void 0===e.venue.categories||0===e.venue.categories.length?"":e.venue.categories[0].shortName.charAt(0).toUpperCase()+function(e){var t="_".split("");return e.split("").map(function(e){return t.indexOf(e)>-1?" ":e}).join("")}(e.venue.categories[0].shortName.slice(1))}},{key:"createFirstCategoryHTML",value:function(e){var t=this.getFirstCategory(e);return""===t?"":'<span class="iw-chip">\n        '.concat(t,"\n      </span>")}}]),e}(),j=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"create",value:function(e){return'<div class="full-width gm-style-iw">\n        <div class="title">\n          <p class="venue-name">'.concat(O.getName(e),'</p>\n        </div>\n        <div class="address-line">\n          ').concat(O.createFormattedAddressHTML(e),'\n        <div/>\n        <div class="iw-attrs">\n          ').concat(O.createFirstCategoryHTML(e),"\n          ").concat(O.createHereNowHTML(e),'\n        </div>\n        <div>\n          <p class="footnote">Venue info via Foursquare</p>\n      </div>')}}]),e}(),C=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"addScriptToDOM",value:function(e,t){var a=document.createElement("script");a.type="text/javascript",t&&(a.onload=t),document.getElementsByTagName("head")[0].appendChild(a),a.src=e}},{key:"createMap",value:function(e){return new Promise(function(t,a){t(new window.google.maps.Map(document.getElementById("map"),{center:{lat:e.lat,lng:e.lng},zoom:12,mapTypeId:"roadmap"}))})}},{key:"createSearchBox",value:function(e,t,a){var n=new window.google.maps.places.Autocomplete(document.getElementById(t));return n.bindTo("bounds",e),n.setFields(["id","name","types","rating","icon","geometry"]),n.addListener("place_changed",a),n}},{key:"addMarkerToMap",value:function(e,t,a,n,o){var r=new window.google.maps.LatLng({lat:a,lng:n}),s=new window.google.maps.Marker({map:e,title:t,position:r});return o.extend(s.position),s}},{key:"addInfoWindowToMarker",value:function(e,t,a,n){var o=this;a.addListener("click",function(){o.openInfoWindow(e,t,a,n)}),e.fitBounds(e.getBounds()),e.setZoom(12)}},{key:"openInfoWindow",value:function(e,t,a,n){e.panTo(a.getPosition()),this.bounceMarker(a);var o=new window.google.maps.InfoWindow({content:j.create(t)});n(o),o.open(e,a)}},{key:"bounceMarker",value:function(e){e.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},1e3)}}]),e}(),S=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"searchForNearby",value:function(){var e=Object(I.a)(T.a.mark(function e(t,a,n,o){var r,s,i,c,l;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://api.foursquare.com/v2/venues/explore?v=20180323"+"&client_id=".concat("CXVTSFNZQNYTUVI3QM33SWAAUQHCLTMR2FQYYOPSS1EO1YQR")+"&client_secret=".concat("JAKHANMPB3WB4E3B2FO10IGK2FIOSC05TTP2FJGUMLKLQNUE")+"&ll=".concat(t,",").concat(a)+"&intent=browse"+"&radius=".concat(n),r=void 0===o?r:r+"&query=".concat(o),e.next=4,fetch(r);case 4:return s=e.sent,e.next=7,s.json();case 7:return i=e.sent,c=i.response.groups[0].items,l=c.sort(this.sortByRating),e.abrupt("return",l);case 11:case"end":return e.stop()}},e,this)}));return function(t,a,n,o){return e.apply(this,arguments)}}()},{key:"addVenuesToMap",value:function(e,t,a){t.forEach(function(t){var n=new window.google.maps.LatLngBounds,o=C.addMarkerToMap(e,t.name,t.venue.location.lat,t.venue.location.lng,n);t.marker=o,C.addInfoWindowToMarker(e,t,o,a)})}}]),e}(),M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handlePlaceChange=function(){S.searchForNearby(a.props.home.lat,a.props.home.lng,a.props.searchRadius,a.state.searchText).then(function(e){a.props.saveSearchResults(e),S.addVenuesToMap(a.props.map,e,a.props.saveInfoWindow)}).catch(function(e){return console.log(e)})},a.state={searchText:"",placesService:new window.google.maps.places.PlacesService(a.props.map)},a.handleChange=a.handleChange.bind(Object(w.a)(Object(w.a)(a))),a.showTopAttractions=a.showTopAttractions.bind(Object(w.a)(Object(w.a)(a))),a.emitChangeDebounce=y()(a.queryLocation,150),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.showTopAttractions(),C.createSearchBox(this.props.map,"search-text",this.handlePlaceChange)}},{key:"handleChange",value:function(e){this.emitChangeDebounce(e.target.value)}},{key:"queryLocation",value:function(e){this.setState({searchText:e})}},{key:"showTopAttractions",value:function(){var e=this;this.queryLocation(""),S.searchForNearby(this.props.home.lat,this.props.home.lng,this.props.searchRadius,"NASA").then(function(t){e.props.saveSearchResults(t),S.addVenuesToMap(e.props.map,t,e.props.saveInfoWindow)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(m.Grid,null,o.a.createElement(m.GridCell,{span:"4",tablet:"8",desktop:"12"},o.a.createElement(E.TextField,{id:"search-text",tabIndex:"0",box:!0,withTrailingIcon:o.a.createElement(E.TextFieldIcon,{icon:"search"}),fullwidth:!0,type:"text",onChange:this.handleChange,label:"Enter the place you want to find...",placeholder:"",value:this.state.searchText,"aria-label":"Enter search terms for places search"})),o.a.createElement(m.GridCell,{span:"4",tablet:"8",desktop:"12",className:"center-contents"},o.a.createElement(k.Fab,{id:"top-attractions-btn",tabIndex:"0",onClick:this.showTopAttractions,raised:"true",icon:"thumb_up_alt",label:"Top Places...","aria-label":"Show top places",role:"button"}))))}}]),t}(o.a.Component),N=a(25),L=a(10),F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={currentVenueInResults:0,pageForwardDisabled:!1,pageBackDisabled:!1,placesService:new window.google.maps.places.PlacesService(a.props.map)},a.pageForwardResults=a.pageForwardResults.bind(Object(w.a)(Object(w.a)(a))),a.pageBackResults=a.pageBackResults.bind(Object(w.a)(Object(w.a)(a))),a.showInfoWindow=a.showInfoWindow.bind(Object(w.a)(Object(w.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"pageForwardResults",value:function(){var e=this;this.state.currentVenueInResults<this.props.searchResults.length?(this.setState({pageForwardDisabled:!1}),this.setState(function(t){return{currentVenueInResults:t.currentVenueInResults+e.props.searchResultsLimit}})):this.setState({pageForwardDisabled:!0})}},{key:"pageBackResults",value:function(){var e=this;this.state.currentVenueInResults>0?(this.setState({pageBackDisabled:!1}),this.setState(function(t){return{currentVenueInResults:t.currentVenueInResults-e.props.searchResultsLimit}})):this.setState({pageBackDisabled:!0})}},{key:"getVenuesToDisplay",value:function(){var e=this;return this.props.searchResults.reduce(function(t,a,n){return n>=e.state.currentVenueInResults&&n<=e.state.currentVenueInResults+e.props.searchResultsLimit-1&&t.push(a),t},[])}},{key:"showInfoWindow",value:function(e){var t=this.props.searchResults.find(function(t){return t.venue.id===e.aVenue.venue.id}).marker;C.openInfoWindow(this.props.map,e.aVenue,t,this.props.saveInfoWindow)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h3",null,"Search Results..."),this.props.searchResults.length>0?o.a.createElement("div",null,o.a.createElement(L.DataTable,null,o.a.createElement(L.DataTableContent,null,o.a.createElement(L.DataTableHead,{className:"table-heading"},o.a.createElement(L.DataTableRow,null,o.a.createElement(L.DataTableHeadCell,null,"Name"))),o.a.createElement(L.DataTableBody,null,this.getVenuesToDisplay().map(function(t){return o.a.createElement(L.DataTableRow,{key:t.venue.id},o.a.createElement(L.DataTableCell,{tabIndex:"0",onClick:function(){return e.showInfoWindow({aVenue:t})}},O.getName(t)))})))),o.a.createElement("div",{className:"center-contents"},o.a.createElement(N.ButtonIcon,{id:"page-up-btn",tabIndex:"0",role:"button",onClick:this.pageBackResults,disabled:this.state.pageBackDisabled,outlined:this.state.pageBackDisabled.toString(),icon:"arrow_upward","aria-label":"Page up results"}),o.a.createElement(N.ButtonIcon,{id:"page-down-btn",tabIndex:"0",role:"button",onClick:this.pageForwardResults,disabled:this.state.pageForwardDisabled,outlined:this.state.pageForwardDisabled.toString(),icon:"arrow_downward","aria-label":"Page down results"}))):o.a.createElement("p",null,"No matching places found!"))}}]),t}(o.a.Component),W=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).saveInfoWindow=function(e){a.state.isInfoWindowOpen&&0!==a.state.infoWindow&&a.state.infoWindow.close(),a.setState({isInfoWindowOpen:!0}),a.setState({infoWindow:e})},a.saveSearchResults=function(e){a.setState({searchResults:e})},a.state={searchResults:[],isInfoWindowOpen:!1,infoWindow:0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(m.Grid,null,o.a.createElement(m.GridCell,{span:"4",phone:"4",tablet:"7",desktop:"11"},o.a.createElement(M,{handleChange:this.handleChange,home:this.props.home,searchRadius:this.props.searchRadius,map:this.props.map,searchResultsLimit:this.props.searchResultsLimit,saveSearchResults:this.saveSearchResults,saveInfoWindow:this.saveInfoWindow}),o.a.createElement(F,{map:this.props.map,searchResults:this.state.searchResults,searchResultsLimit:this.props.searchResultsLimit,saveInfoWindow:this.saveInfoWindow}))))}}]),t}(o.a.Component),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).loadGoogleMap=function(){C.createMap(a.state.home).then(function(e){a.setState({map:e}),a.setState({mapIsLoaded:!0}),a.setState({mapHasError:!1})}).catch(function(e){console.log("Failed to load map. Error: ",e),a.setState({mapHasError:!0})})},a.state={home:{lat:Number.parseFloat("28.5729"),lng:Number.parseFloat("-80.6490")},searchRadius:Number.parseInt("32000",10),searchResultsLimit:Number.parseInt("5",10),mapHasError:!1,map:{},mapIsLoaded:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){C.addScriptToDOM("https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyATr66LXoeC02a3PKqvZTdfgMh6X2NIha4",this.loadGoogleMap)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("header",null,o.a.createElement(v.TopAppBar,null,o.a.createElement(v.TopAppBarRow,null,o.a.createElement(v.TopAppBarSection,{alignStart:!0},o.a.createElement(v.TopAppBarTitle,null,"Neighborhood Map"))))),o.a.createElement("main",null,o.a.createElement(m.Grid,null,o.a.createElement(m.GridCell,{span:"4",phone:"4",tablet:"3",desktop:"4"},this.state.mapIsLoaded?o.a.createElement(p.a,null,o.a.createElement(h.a,{exact:!0,path:"/",render:function(){return o.a.createElement(W,{home:e.state.home,searchRadius:e.state.searchRadius,searchResultsLimit:e.state.searchResultsLimit,map:e.state.map})}})):""),this.state.mapHasError?o.a.createElement(m.GridCell,{className:"map-container",span:"4",phone:"4",tablet:"4",desktop:"8"},o.a.createElement(f.Typography,{use:"headline5"},"Google Maps API failure!"),o.a.createElement(f.Typography,{use:"body1"},"An error has occurred building the map. Please try again.")):o.a.createElement(m.GridCell,{className:"map-container",span:"4",phone:"4",tablet:"4",desktop:"8"},o.a.createElement(g,{id:"map"})))))}}]),t}(o.a.Component),B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var D=a(64);s.a.render(o.a.createElement(D.a,null,o.a.createElement(A,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/neighborhoodmap",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/neighborhoodmap","/service-worker.js");B?(function(e,t){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):x(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):x(t,e)})}}()}},[[35,2,1]]]);
//# sourceMappingURL=main.1a25c2d2.chunk.js.map